language: ruby
rvm:
- 2.1
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - secure: I9Ln1FFOPezgAdR0FkTKHYHV+1HUOgbBMmcm1xMhZREMXGkq9UlMw17zpOTs22qo98HOPwOVChp6I7v/zlDclTyQT1VdsqFldHV/gfX+kOh9hDFt67q8bAJvtA/UnFQc8d04PcpJtHeCAU8zgg01ymVUCXPl8q/P4E5zwl5kyjJPl+oDYgvV2AUb7V7aOoCWVqOpgx8UuxFhBBOKH5KMnDW8XlYbxjEl8MXbLg59vwzvB6egArW6uq36U3TLIVtPC9DTA0xy708QiF5nmTiMb2ilJpoVpNHOjxf8T29A6+8mPjKj/Y2r2FJR3Kk01Z8FaVYv6ZyTWPrGJDL4zMtZDGFjD0OvzX3HYQpCxmdOdFOSO9LJfh0G48AG+s06leEIt4cYsfDOdGQKPDva+QAvqqCK5AVBce3oQS7MNx7aEWWSpEijNxWDyuP0TxjL3UlKkdBBk65tXkHJ1O8xumd27eD8BAurcTJ5ftwmwBGe+v4AfteXXJCAqOZJ87uCz76DHLs7nP+U/G6gzFw4/DzN2lnNhSWVlUta6hD7xhEWivKOlXVQLWYZ2iJkhBYZEJVQy0zAWwFidPwYgIPbHgvAega7Z5A8LuTqk8K6ahPf+jcFqdNHrw8GcunNHhTgfyTjrJdjaRrqJT9orD+VMxdRdfO6wjGZKSlr1n6+9txrcQ0=
  - secure: rZjVxhpTI0k1X+Up/oPnfQMS/27/fxXztGrZBs1pMaN8j0eZMAI61nt59Z5ZL6yLhHPjWT3eSv/uWSJHxy7v/lJ92zDJ+iYnS0qES1PmeXXDeZyHHJK7FqYCIhHKHcnYWLo4uY1stdS61aO8UrKB6CTI5XoKaSdLbM9eBHAIWPnXUs8TMxSnnUa4ccl7PxFi7lIcBmrAuOgAPtrq7sxP0ESsEJCM/0uHwVssRIPb0qkyGy0Vx/U9ZuNHp1lwEb6uJM67mlqBeuD2wQySaRMqDti6scrEa1P93j70LlotUDrms0ddy8ANPVVeqv4MXJP1nRWjGQ7aO01zKCru70M7ESBy1SSVk1RzfJ6qzMuBeuMy8tUZZIq7LECR9mvs7Glao3oapytyxHVY0CjZrW69hD7Fej+dZFzBKa2whTakyYQyA3leN+gpgzwmwJTNvA+0pDm5SUVeo5JvYHeFHSCrZXv4gLRlx0cd07uW7M2OdjM1O++KlqsFDlYBc93/p0nO1rkTu8WOmiyPJ2vM8maanafCgRdn1RS70ep7ss5+k9sb/k0IO6CSGZgyJX8yRVKYuwOaRn3wbUofqu/HBdKXlLF4Bgvwm4WN6P/HPpVVhZFdcPBns/hcWsDzs4t1EvT6JFl76OBcifWsXMPp26ZvZgu8drfKEFsWHI9FAFFUihc=
  - secure: eBzaurFDHr+0MK601G/3UsJJzZsllYZXL5zJ90o3tnhGtRSMUQoRMm2tJDe5feTouP5bAj+HllgZLSgfV7DBM1WLWkKy+p4uwRxUfAm+3aLelZ/HNn4hkt4TH6RIg1xHBfOAKEz0tHFX1e23hewo0U8r8zLcoEfiTEGCT7w2wc6LErNffd0mCah6xN4aOGoSLadiHM1+nkklkhLzdDeLwcIzOki+7D4CwogOwCxAsGJGqwVK9P+TIwC19jF+3vVvA8r2bQk+U5c9GpK63K/5L8lCWNJl0LwZYdZqWO7ay8EKPlym0Z7Ml2sRwxmryUWIYN0wJdUf48eEzVgLYXzTvELhpAnllMhBXlGzyhC8+QyDOMdRMwrWABGVDCwn3cPOqwPSm7hHs9la2STeGdk9Y54sIFhhfw2tNsgPURfgORV9Pf7RoyJ2G83ol5TACVbrotvcD7ruKhsvmtjj2f8/Ig4RM72rTxsnD7o4n4CQbXhI0gUNr2q+0tXFjTQamBxc0p6riHQG55gGS0hUVnxVncNVkti3Se1ZQPG8Il5XUz40eYytAlbtFtH4pS45/vGu0H9ZKRtab/3z7g/0ke7sED8eWUc/OhZfiyP9Xwd2ggEOLhc8oV5h+SlWjAvxfPfFlI2RA+2MZzTQlUKsLyA5/bQ5t8/Z28wiDAbZBPzpvno=
  - secure: EHHECzeQCG1cfdo2ntCurP7xvywFQJ6xIVANXd+DQfI5a1wtZMH5IS8bVG6pJRp2DRctn/JgAG+qXL9aC3eiMVu3Io8/ebY+G2Rg5beLXfdVcB0bAjcIT3EhUbJaZ63eEhDSype+No/zmeGWlKSjpttlYDxwRAyV12/QogLeaTp85fAczWyZhPkrK7DD2U8XZOC8U80Uqc8kIn5XN+5gJlsJoBbL1zRno4TZqeJs6HtiZAWbAeb0y8FTfoT53iADiD/X3bk0EAQGvlkyjcmiGaiY3FJ24qTydjJ1+h8KW96herTi4W29imEx4/EoO4U8mb460iD8qPy5Zzs4iAEC/RMORHpDx9P9cU2SQUcALs5G7EK5bjMSWnG0jd8HAmhqg+2dmxRS+SPvUCuTblYIXjjKAFc3VmZzsx9kWwaJ3a6c9YTBSBM+ALWpnZeVoN6D5DY2E08ORjj4Orf9ygMOY7pEGtv/vT8sQ3NBO4Hbw/nNcoDdgQkJNQveD39YcZCsFETg+PRo9WLwZBwZo0SFeOGSHJb8iae5NJYj/aMp8g+Whbzqjc6MAsFJUOLdtWApxNA1ibGOmdYP0u7QdxX6kqGtTngzk8uE3Jhr/Vt2hTyRFHHK3sLiVdEvIvlyA4HnlKFjsgpDr95N2wcPkej7kVefYCDm2MteXIqrZwfOCHs=
addons:
  ssh_known_hosts: 188.166.20.178
git:
  submodules: false
before_install:
- sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
- git submodule update --init --recursive
- openssl aes-256-cbc -K $encrypted_dd5a8f02a79f_key -iv $encrypted_dd5a8f02a79f_iv
  -in stuff.tar.enc -out stuff.tar -d
- tar xvf stuff.tar
- bash _scripts/install.sh
script:
- bash _scripts/build.sh
- bash _scripts/test.sh
after_success:
- bash _scripts/deploy.sh
notifications:
  slack:
    secure: RJu+MqKp4mH7aXCoJEfb/YvjkT96dTTO1IyvEZDhpKHIh6ZR/43hOXognBmC5cFKJZngDyutJZwSMkelTj/FxyLn0cvTZFRmJVpKxyAwkqhP4TZuZr7cdWIF4USe+0Ze5sejJehpLB99LdJ4zT1nxpWi3aAqRUlnrqtjKY+YpLSjEQ4sCsrT8UsFctpWJoiZA36slNgTV+OqmoUJm3lLlBdIwk71esQbQvJvknt5G6Ykf8k/NnKg/FqtVxMzPET2ik5IYkPrYj8K8pS9cs211YRKNQkmeGoos8NfLnixF9qx8Vz7KLwyUoyU0E7MOdT7NvVWsw1G7mNLoBjZNKBJVoRLoE2VxwCt5arcGeexvwJfswDnF2su2D5w0H+805waogLWiwTA1BaDcLAnF3DMZxqjw6ykpAg0mqdk4dotBR5LPoOwIo/38FhvIG3X9GHyDlftyQaCio9nBB2YHF8dfXfFmXXK5V2Zjete7Mcq6BpSB3QDxeV2RUE+GyAVjU7Bo+XNMmrnToh36MdIEH5JLkSqcOs3IPHAohP9Ff30/VnhVJshYBWCwo9fvFo/cRIZdAY1pj6I2xWaYgHYfhiRbgEyRfjQ6IJzyFvAr6vGGneXgEOPHYju/Sin0o627GAxEW+X2xKDq0kFFS1PtMT3DiOucgmBITCVVGvLZKfL9Nc=
